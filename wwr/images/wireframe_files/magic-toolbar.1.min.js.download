function removeSectionPreview(){var e=document.querySelector(".preview-section-container");e&&e.remove()}fetch("/assets/sectionsData.json").then(e=>e.json()).then(e=>{window.sectionsData=e;var t=document.getElementById("all-elements-and-sections");const n=document.getElementById("sublist-wrap"),o=document.createElement("ul");function i(t,c){let s=setTimeout(()=>{c.classList.add("section-pending")},600);fetch(ASSETES_URL+"/sections.html").then(e=>e.text()).then(e=>{clearTimeout(s),c.classList.remove("section-pending");const n=(new DOMParser).parseFromString(e,"text/html").querySelector(`[section-type="${t}"]`).cloneNode(!0);e=uuidv4(),n.id=e,c.innerHTML="",c.appendChild(n),e=parseFloat(c.style.width);n.style.width=e+"px";const a=n.getAttribute("data-optimal-width")||getComputedStyle(n).minWidth,i=n.getAttribute("data-optimal-height")||getComputedStyle(n).minHeight,o="none"===getComputedStyle(n).maxHeight?"10000px":getComputedStyle(n).maxHeight;"none"!==getComputedStyle(n).maxWidth&&getComputedStyle(n).maxWidth;requestAnimationFrame(()=>{n.offsetWidth;var e=n.offsetHeight,t=activepage.width(),e=Math.min(Math.max(e,parseInt(i)),parseInt(o));Object.assign(c.style,{width:t+"px",height:e+"px"}),Object.assign(n.style,{width:"100%",height:"100%",minWidth:a,minHeight:i,maxHeight:o})})}).catch(e=>{clearTimeout(s),c.classList.remove("section-pending"),c.textContent="Error loading section"})}function a(e){var t=document.getElementById("selected-section-category-toolbar"),n=JSON.parse(t.dataset.currentCategory);let a=parseInt(t.dataset.currentIndex);(a=(a+=e)<0?n.sections.length-1:a)>=n.sections.length&&(a=0);e=n.sections[a],document.getElementById("selected-section-category-name").textContent=e.name,t.dataset.currentIndex=a.toString(),n=document.querySelector(".preview-section-container");n&&i(e.id,n)}o.id="sections-list",e.forEach(e=>{var t=document.createElement("li"),n=(t.dataset.tag=e.tag,document.createElement("button")),a=(n.className="expand-list-toggle",n.dataset.ref="l-"+e.name,document.createElement("img")),i=(a.src=e.icon,a.loading="lazy",document.createElement("div"));i.className="widget-name",i.textContent=e.name.replace(/-/g," ").charAt(0).toUpperCase()+e.name.replace(/-/g," ").slice(1),n.appendChild(a),n.appendChild(i),t.appendChild(n),o.appendChild(t)}),t.appendChild(o),e.forEach(i=>{const o=document.createElement("ul");o.className="sub-list",o.id="l-"+i.name,i.sections.forEach(e=>{var t=document.createElement("li"),n=document.createElement("button"),a=(n.setAttribute("elementtype","section"),n.dataset.sectionType=e.id,n.dataset.image=e.imgUrl,n.dataset.name=i.name.charAt(0).toUpperCase()+i.name.slice(1)+" section",n.className="is-section",document.createElement("div"));a.className="widget-name",a.textContent=i.name.charAt(0).toUpperCase()+i.name.slice(1)+" "+e.id.split("-").pop(),n.appendChild(a),t.appendChild(n),o.appendChild(t)}),n.appendChild(o)}),document.addEventListener("click",function(e){if(e.target.matches("#predicted-buttons button[section-name]")){const a=e.target.getAttribute("section-name").toLowerCase();e=window.sectionsData.find(e=>e.name===a);e&&(t=e.sections[0],document.getElementById("selected-section-category-name").textContent=t.name,document.getElementById("selected-section-category-toolbar").classList.add("visible"),document.getElementById("magic-toolbar").style.clipPath="inset(0px 120px 312px 120px round 12px)",(n=document.getElementById("selected-section-category-toolbar")).dataset.currentCategory=JSON.stringify(e),n.dataset.currentIndex="0",e=t.id,n=document.querySelector(".brandnew"))&&((t=document.createElement("div")).className="preview-section-container",Object.assign(t.style,{position:"absolute",top:n.style.top,left:0,width:predictor.screenSize.width+"px",height:n.style.height,zIndex:n.style.zIndex}),n.parentNode.replaceChild(t,n),i(e,t))}var t,n}),document.getElementById("selected-section-category-arrow-left").addEventListener("click",()=>a(-1)),document.getElementById("selected-section-category-arrow-right").addEventListener("click",()=>a(1)),document.addEventListener("keydown",function(e){document.getElementById("selected-section-category-toolbar").classList.contains("visible")&&(37===e.which?(a(-1),e.preventDefault()):39===e.which?(a(1),e.preventDefault()):"Enter"===e.key&&(hideMagicToolbar(),e.preventDefault()))})}).catch(e=>{});